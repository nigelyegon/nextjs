{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/ (unsupported edge import 'stream')"],"sourcesContent":["__turbopack_context__.n(__import_unsupported(`stream`));\n"],"names":[],"mappings":"AAAA,sBAAsB,CAAC,CAAC,qBAAqB,CAAC,MAAM,CAAC"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/ (unsupported edge import 'crypto')"],"sourcesContent":["__turbopack_context__.n(__import_unsupported(`crypto`));\n"],"names":[],"mappings":"AAAA,sBAAsB,CAAC,CAAC,qBAAqB,CAAC,MAAM,CAAC"}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport jwt from \"jsonwebtoken\";\n\nexport async function middleware(req) {\n  const { pathname } = req.nextUrl;\n\n  const publicPaths = [\n    \"/login\",\n    \"/register\",\n    \"/api/auth/login\",\n    \"/api/auth/register\",\n    \"/api/auth/refresh\",\n  ];\n  if (publicPaths.some(path => pathname.startsWith(path))) return NextResponse.next();\n\n  let accessToken = req.cookies.get(\"accessToken\")?.value;\n\n  if (!accessToken) {\n    const refreshToken = req.cookies.get(\"refreshToken\")?.value;\n    if (!refreshToken) return NextResponse.redirect(new URL(\"/login\", req.url));\n\n    try {\n      const payload = jwt.verify(refreshToken, process.env.JWT_REFRESH_SECRET);\n\n      // Issue new access token\n      accessToken = jwt.sign(\n        { id: payload.id },\n        process.env.JWT_SECRET,\n        { expiresIn: parseInt(process.env.ACCESS_TOKEN_EXPIRES) }\n      );\n\n      const res = NextResponse.next();\n      res.cookies.set({\n        name: \"accessToken\",\n        value: accessToken,\n        httpOnly: true,\n        path: \"/\",\n        maxAge: parseInt(process.env.ACCESS_TOKEN_EXPIRES),\n      });\n      return res;\n    } catch {\n      return NextResponse.redirect(new URL(\"/login\", req.url));\n    }\n  }\n\n  try {\n    jwt.verify(accessToken, process.env.JWT_SECRET);\n    return NextResponse.next();\n  } catch {\n    return NextResponse.redirect(new URL(\"/login\", req.url));\n  }\n}\n\nexport const config = { matcher: [\"/((?!_next/static|_next/image|favicon.ico).*)\"] };\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEO,eAAe,WAAW,GAAG;IAClC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,OAAO;IAEhC,MAAM,cAAc;QAClB;QACA;QACA;QACA;QACA;KACD;IACD,IAAI,YAAY,IAAI,CAAC,CAAA,OAAQ,SAAS,UAAU,CAAC,QAAQ,OAAO,gMAAY,CAAC,IAAI;IAEjF,IAAI,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC,gBAAgB;IAElD,IAAI,CAAC,aAAa;QAChB,MAAM,eAAe,IAAI,OAAO,CAAC,GAAG,CAAC,iBAAiB;QACtD,IAAI,CAAC,cAAc,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,IAAI,GAAG;QAEzE,IAAI;YACF,MAAM,UAAU,wJAAG,CAAC,MAAM,CAAC,cAAc,QAAQ,GAAG,CAAC,kBAAkB;YAEvE,yBAAyB;YACzB,cAAc,wJAAG,CAAC,IAAI,CACpB;gBAAE,IAAI,QAAQ,EAAE;YAAC,GACjB,QAAQ,GAAG,CAAC,UAAU,EACtB;gBAAE,WAAW,SAAS,QAAQ,GAAG,CAAC,oBAAoB;YAAE;YAG1D,MAAM,MAAM,gMAAY,CAAC,IAAI;YAC7B,IAAI,OAAO,CAAC,GAAG,CAAC;gBACd,MAAM;gBACN,OAAO;gBACP,UAAU;gBACV,MAAM;gBACN,QAAQ,SAAS,QAAQ,GAAG,CAAC,oBAAoB;YACnD;YACA,OAAO;QACT,EAAE,OAAM;YACN,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,IAAI,GAAG;QACxD;IACF;IAEA,IAAI;QACF,wJAAG,CAAC,MAAM,CAAC,aAAa,QAAQ,GAAG,CAAC,UAAU;QAC9C,OAAO,gMAAY,CAAC,IAAI;IAC1B,EAAE,OAAM;QACN,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,IAAI,GAAG;IACxD;AACF;AAEO,MAAM,SAAS;IAAE,SAAS;QAAC;KAAgD;AAAC"}}]
}